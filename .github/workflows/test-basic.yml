# Basic Test Workflow - For debugging
name: Basic Tests

on:
    workflow_dispatch:
    push:
        branches: [main]
        paths:
            - "app/**"
            - "tests/**"

jobs:
    basic-test:
        name: Basic Test
        runs-on: ubuntu-latest
        steps:
            - name: Checkout code
              uses: actions/checkout@v4

            - name: Set up Python
              uses: actions/setup-python@v5
              with:
                  python-version: "3.11"

            - name: Install Poetry
              uses: snok/install-poetry@v1
              with:
                  version: latest

            - name: Install dependencies
              run: |
                  poetry install --all-extras --with dev

            - name: Test imports
              run: |
                  poetry run python -c "import app.cli; print('✅ CLI import works')"
                  poetry run python -c "import app.default_transforms; print('✅ Transforms import works')"
                  poetry run python -c "import pandas; print('✅ Pandas works')"

            - name: Test CLI
              run: |
                  poetry run pipex --help

            - name: Run basic tests only
              run: |
                  poetry run pytest tests/test_basic.py -v

            - name: Test build
              run: |
                  poetry build
                  ls -la dist/
